# Система логування клієнта на сервер

## Огляд

Всі логи з клієнта (браузера) тепер відправляються на сервер замість виведення в консоль браузера.

## Реалізація

### 1. Endpoint на сервері

**Файл**: `server.js`
**Endpoint**: `POST /api/client-log`

Приймає логи від клієнта та виводить їх на серверну консоль.

### 2. Wrapper для console.* на клієнті

**Файл**: `app.js` (на початку файлу)

Перехоплює всі виклики `console.log`, `console.warn`, `console.error`, `console.info`, `console.debug` та:
- Виводить їх в оригінальну консоль браузера (для розробки)
- Відправляє на сервер через `/api/client-log`

### 3. Перевірка демо сторінки

**ВАЖЛИВО**: На демо сторінці (`/demo`) логування **ВИМКНЕНО**.

Wrapper автоматично перевіряє `window.location.pathname` і не відправляє логи на сервер, якщо користувач на демо сторінці.

## Структура логів

Логи відправляються в такому форматі:

```json
{
  "level": "info|warn|error|debug",
  "message": "Текст повідомлення",
  "data": {
    "args": ["додаткові", "аргументи"]
  },
  "timestamp": "2024-01-01T12:00:00.000Z",
  "url": "https://example.com/page",
  "userAgent": "Mozilla/5.0..."
}
```

## На сервері

Логи виводяться в консоль сервера з префіксом `[CLIENT]`:

```
[CLIENT] [INFO] Текст повідомлення { timestamp: '...', url: '...', ... }
[CLIENT] [WARN] Попередження { ... }
[CLIENT] [ERROR] Помилка { ... }
```

## Файли, які використовують логування

### Клієнтські файли (відправляють на сервер):
- `app.js` - основний файл додатку
- `visualization.js` - візуалізація
- `public/demo.html` - демо сторінка (але логування вимкнено)

### Серверні файли (логують безпосередньо на сервер):
- `lib/textAnalysis.js` - аналіз тексту
- `lib/audioshake-client.js` - клієнт AudioShake
- `lib/cloudinary-upload.js` - завантаження на Cloudinary
- `server.js` - основний сервер

## Примітки

1. **Демо сторінка**: На `/demo` логування повністю вимкнено - нічого не відправляється на сервер
2. **Помилки відправки**: Якщо сервер недоступний, логи просто не відправляються (silent fail)
3. **Серіалізація**: Об'єкти автоматично серіалізуються в JSON для відправки
4. **Оригінальна консоль**: Логи все ще виводяться в консоль браузера для розробки

## Тестування

Для перевірки роботи системи логування:

1. Відкрити консоль браузера - мають з'являтися логи
2. Перевірити консоль сервера - мають з'являтися логи з префіксом `[CLIENT]`
3. Відкрити `/demo` - логи не повинні відправлятися на сервер

