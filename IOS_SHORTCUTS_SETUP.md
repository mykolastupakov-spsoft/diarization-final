# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è iOS Shortcuts –¥–ª—è Audio Diarization

## –ö—Ä–æ–∫ 1: –ó–∞–ø—É—Å–∫ Flask —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ MacBook

### 1.1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (—è–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ)

```bash
pip install -r requirements.txt
```

### 1.2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å–µ—Ä–≤–µ—Ä

```bash
python app_ios_shortcuts.py
```

–ê–±–æ –∑ —è–≤–Ω–∏–º –≤–∫–∞–∑–∞–Ω–Ω—è–º –ø–æ—Ä—Ç—É:

```bash
IOS_SHORTCUTS_PORT=5007 python -u app_ios_shortcuts.py
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª `app_ios_shortcuts.py` –¥–ª—è —É–Ω–∏–∫–Ω–µ–Ω–Ω—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑ —ñ–Ω—à–∏–º–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏, —è–∫—ñ –º–æ–∂—É—Ç—å —Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ `app_demo2.py`.

**–í–∞–∂–ª–∏–≤–æ:** –°–µ—Ä–≤–µ—Ä –¥–ª—è —à–æ—Ä—Ç–∫–∞—Ç—ñ–≤ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è –Ω–∞ –ø–æ—Ä—Ç—É **5007** (—â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ –∑ `app_demo2.py`, —è–∫–∏–π –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–æ—Ä—Ç 5005). –°–µ—Ä–≤–µ—Ä –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ –≤—Å—ñ—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞—Ö (`0.0.0.0`).

### 1.3. IP –∞–¥—Ä–µ—Å–∏ MacBook

**–õ–æ–∫–∞–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞ (Wi-Fi):**
```bash
ipconfig getifaddr en0
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 192.168.31.219
```

**Tailscale (Tailnet):**
```
100.67.135.103
```

**–í–∞–∂–ª–∏–≤–æ:** 
- –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ: MacBook —Ç–∞ iPhone –º–∞—é—Ç—å –±—É—Ç–∏ –≤ –æ–¥–Ω—ñ–π Wi‚ÄëFi –º–µ—Ä–µ–∂—ñ
- –î–ª—è Tailscale: –û–±–∏–¥–≤–∞ –ø—Ä–∏—Å—Ç—Ä–æ—ó –º–∞—é—Ç—å –±—É—Ç–∏ –≤ Tailscale (–ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–æ—ó –º–µ—Ä–µ–∂—ñ)

### 1.4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞

–ó iPhone (Safari) –∞–±–æ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é:

**–õ–æ–∫–∞–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞:**
```
http://192.168.31.219:5007/api/health
```

**Tailscale:**
```
http://100.67.135.103:5007/api/health
```

–ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è JSON –∑ `"status": "ok"`.

---

## –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è iOS Shortcut

### 2.1. –í—ñ–¥–∫—Ä–∏—Ç–∏ Shortcuts app

–ù–∞ iPhone –≤—ñ–¥–∫—Ä–∏—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫ **Shortcuts** (–Ø—Ä–ª–∏–∫–∏).

### 2.2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π Shortcut

1. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"+"** (–ø–ª—é—Å) –≤–≥–æ—Ä—ñ —Å–ø—Ä–∞–≤–∞
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"Add Action"**

### 2.3. –î–æ–¥–∞—Ç–∏ –¥—ñ—ó

#### –î—ñ—è 1: Record Audio (–∞–±–æ Get File)

**–í–∞—Ä—ñ–∞–Ω—Ç A: –ó–∞–ø–∏—Å –∞—É–¥—ñ–æ**
- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Record Audio"**
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
  - Maximum Duration: 600 —Å–µ–∫—É–Ω–¥ (10 —Ö–≤–∏–ª–∏–Ω)
  - Preset: None

**–í–∞—Ä—ñ–∞–Ω—Ç B: –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ñ–∞–π–ª**
- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get File"**
- –î–æ–∑–≤–æ–ª–∏—Ç–∏ –≤–∏–±—ñ—Ä —Ñ–∞–π–ª—É –∑ Files app

**–í–∞—Ä—ñ–∞–Ω—Ç C: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Share Sheet**
- –£ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö Shortcut —É–≤—ñ–º–∫–Ω—É—Ç–∏ **"Show in Share Sheet"**
- –î–æ–¥–∞—Ç–∏ –¥—ñ—é **"Get Shortcut Input"** –Ω–∞ –ø–æ—á–∞—Ç–∫—É

#### –î—ñ—è 2: Ask for Input (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Ask for Input"**
- Question: `"Number of speakers? (Leave empty for auto)"`
- Input Type: Number
- Allow Decimal Numbers: No
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `num_speakers`

#### –î—ñ—è 3: Get Contents of URL (POST /process)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Contents of URL"**
- –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:
  - **URL:** `http://[YOUR_MAC_IP]:5007/process`
    - **–õ–æ–∫–∞–ª—å–Ω–∞ –º–µ—Ä–µ–∂–∞:** `http://192.168.31.219:5007/process`
    - **Tailscale:** `http://100.67.135.103:5007/process` (–ø—Ä–∞—Ü—é—î –∑ –±—É–¥—å-—è–∫–æ—ó –º–µ—Ä–µ–∂—ñ)
  - **Method:** POST
  - **Headers:** (–∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º –∞–±–æ –¥–æ–¥–∞—Ç–∏ –∑–∞ –ø–æ—Ç—Ä–µ–±–∏)
  - **Request Body:** Form
    - **Field 1:**
      - Name: `file`
      - Value: [Audio File] (–≤–∏–±—Ä–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É –∑ –î—ñ—ó 1)
      - Type: File
    - **Field 2 (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):**
      - Name: `num_speakers`
      - Value: [num_speakers] (—è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏ –î—ñ—é 2)
      - Type: Text
    - **Field 3 (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):**
      - Name: `language`
      - Value: `uk` (–∞–±–æ `en`, `auto`)
      - Type: Text
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `initial_response`

#### –î—ñ—è 4: Get Dictionary from Input (–æ—Ç—Ä–∏–º–∞—Ç–∏ job_id)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary from Input"**
- Input: [initial_response] (—Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ –î—ñ—ó 3)
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `response_dict`

#### –î—ñ—è 5: Get Dictionary Value (job_id)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary Value"**
- Dictionary: [response_dict]
- Key: `job_id`
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `job_id`

#### –î—ñ—è 6: Repeat (Polling —Å—Ç–∞—Ç—É—Å—É)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Repeat"**
- Repeat: 20 —Ä–∞–∑—ñ–≤ (–∞–±–æ –ø–æ–∫–∏ –Ω–µ –≥–æ—Ç–æ–≤–æ)
- –í—Å–µ—Ä–µ–¥–∏–Ω—ñ Repeat:
  
  **6.1. Wait**
  - –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Wait"**
  - Wait: 3 seconds
  
  **6.2. Get Contents of URL (GET /process/{job_id}/status)**
  - –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Contents of URL"**
  - URL: `http://[YOUR_MAC_IP]:5007/process/[job_id]/status`
    - –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É `job_id` –∑ –î—ñ—ó 5
  - Method: GET
  - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `status_response`
  
  **6.3. Get Dictionary from Input**
  - –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary from Input"**
  - Input: [status_response]
  - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `status_dict`
  
  **6.4. Get Dictionary Value (status)**
  - –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary Value"**
  - Dictionary: [status_dict]
  - Key: `status`
  - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `status`
  
  **6.5. If (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É)**
  - –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"If"**
  - Condition: [status] = `"completed"`
  - If `status` = `"completed"`:
    - Exit Repeat
  - If `status` = `"failed"`:
    - Get Dictionary Value ‚Üí `error`
    - Show Alert –∑ –ø–æ–º–∏–ª–∫–æ—é
    - Exit Repeat

#### –î—ñ—è 7: Get Dictionary Value (result)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary Value"**
- Dictionary: [status_dict] (–æ—Å—Ç–∞–Ω–Ω—ñ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ polling)
- Key: `result`
- –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `result_dict`

#### –î—ñ—è 8: Format Results

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Get Dictionary Value"**
  - Dictionary: [result_dict]
  - Key: `segments`
  - –ó–±–µ—Ä–µ–≥—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –∑–º—ñ–Ω–Ω—É `segments`
- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Repeat with Each"**
  - Input: [segments]
- –í—Å–µ—Ä–µ–¥–∏–Ω—ñ Repeat:
  - Get Dictionary Value ‚Üí `speaker`
  - Get Dictionary Value ‚Üí `start`
  - Get Dictionary Value ‚Üí `end`
  - Get Dictionary Value ‚Üí `text`
  - Format: `"[00:XX] Speaker {speaker + 1}: {text}"`
  - Append to variable `formatted_text`

#### –î—ñ—è 9: Show Result

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Show Result"**
- Input: [formatted_text]

#### –î—ñ—è 10: Copy to Clipboard (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

- –ó–Ω–∞–π—Ç–∏ –¥—ñ—é **"Copy to Clipboard"**
- Input: [formatted_text]
- –ü–æ–∫–∞–∑–∞—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è

### 2.4. –ó–±–µ—Ä–µ–≥—Ç–∏ Shortcut

1. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"Done"**
2. –î–∞—Ç–∏ –Ω–∞–∑–≤—É: **"AI Transcribe & Diarize"**
3. –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ: —É–≤—ñ–º–∫–Ω—É—Ç–∏ **"Show in Share Sheet"** –¥–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ —ñ–Ω—à–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤

---

## –ö—Ä–æ–∫ 3: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### 3.1. –õ–æ–∫–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–∑ MacBook)

```bash
./test_ios_shortcuts_api.sh
```

–ê–±–æ –≤—Ä—É—á–Ω—É:

```bash
curl -X POST http://localhost:5007/process \
  -F "file=@audio\ examples/Call\ center\ 1.wav" \
  -F "num_speakers=2" \
  -F "language=uk"
```

### 3.2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ iPhone

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ Shortcuts app
2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π Shortcut
3. –ó–∞–ø–∏—Å–∞—Ç–∏ –∞–±–æ –≤–∏–±—Ä–∞—Ç–∏ –∞—É–¥—ñ–æ
4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

---

## –§–æ—Ä–º–∞—Ç –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ API

### POST /process - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è (202 Accepted):

```json
{
  "success": true,
  "job_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "pending",
  "message": "Processing started. Use GET /process/{job_id}/status to check progress."
}
```

### GET /process/{job_id}/status - –°—Ç–∞—Ç—É—Å –∑–∞–≤–¥–∞–Ω–Ω—è:

**–ü–æ–∫–∏ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è (200 OK):**
```json
{
  "success": true,
  "job_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "processing"
}
```

**–ì–æ—Ç–æ–≤–æ (200 OK):**
```json
{
  "success": true,
  "job_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "completed",
  "result": {
    "success": true,
    "duration": 125.5,
    "full_text": "–ü—Ä–∏–≤—ñ—Ç, —è–∫ —Å–ø—Ä–∞–≤–∏? –í—Å–µ –¥–æ–±—Ä–µ, –¥—è–∫—É—é.",
    "segments": [
      {
        "speaker": 0,
        "start": 0.5,
        "end": 4.2,
        "text": "–ü—Ä–∏–≤—ñ—Ç, —è–∫ —Å–ø—Ä–∞–≤–∏?"
      },
      {
        "speaker": 1,
        "start": 4.3,
        "end": 8.1,
        "text": "–í—Å–µ –¥–æ–±—Ä–µ, –¥—è–∫—É—é."
      }
    ]
  }
}
```

**–ü–æ–º–∏–ª–∫–∞ (200 OK):**
```json
{
  "success": true,
  "job_id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "failed",
  "error": "Failed to extract speaker embeddings",
  "code": "PROCESSING_ERROR"
}
```

**–ó–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ (404 Not Found):**
```json
{
  "success": false,
  "error": "Job not found",
  "code": "JOB_NOT_FOUND"
}
```

### –ü–æ–º–∏–ª–∫–∏ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è (400/413/500):

```json
{
  "success": false,
  "error": "File too large",
  "code": "FILE_SIZE_EXCEEDED"
}
```

**–ö–æ–¥–∏ –ø–æ–º–∏–ª–æ–∫:**
- `NO_FILE` (400): –§–∞–π–ª –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ
- `INVALID_FORMAT` (400): –ù–µ–≤—ñ–¥–æ–º–∏–π —Ñ–æ—Ä–º–∞—Ç –∞—É–¥—ñ–æ
- `FILE_SIZE_EXCEEDED` (413): –§–∞–π–ª > 100 MB
- `PROCESSING_ERROR` (500): –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ–±—Ä–æ–±—Ü—ñ
- `JOB_NOT_FOUND` (404): –ó–∞–≤–¥–∞–Ω–Ω—è –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ (—Å—Ç–∞—Ä—ñ—à–µ 1 –≥–æ–¥–∏–Ω–∏ –∞–±–æ –Ω–µ—ñ—Å–Ω—É—é—á–∏–π ID)

---

## –†–æ–∑–≤'—è–∑–∞–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –°–µ—Ä–≤–µ—Ä –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑ iPhone

1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ MacBook —Ç–∞ iPhone –≤ –æ–¥–Ω—ñ–π Wi‚ÄëFi –º–µ—Ä–µ–∂—ñ
2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ñ–∞–π—Ä–≤–æ–ª –Ω–∞ MacBook:
   ```bash
   # –î–æ–∑–≤–æ–ª–∏—Ç–∏ –≤—Ö—ñ–¥–Ω—ñ –∑'—î–¥–Ω–∞–Ω–Ω—è –Ω–∞ –ø–æ—Ä—Ç 5007
   sudo /usr/libexec/ApplicationFirewall/socketfilterfw --add /usr/bin/python3
   ```
3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ —Å–µ—Ä–≤–µ—Ä —Å–ª—É—Ö–∞—î –Ω–∞ `0.0.0.0`, –∞ –Ω–µ `127.0.0.1`

### –ü–æ–º–∏–ª–∫–∞ "Connection refused"

- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ Flask —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å IP –∞–¥—Ä–µ—Å–∏
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–æ—Ä—Ç (–º–∞—î –±—É—Ç–∏ 5007)

### –ü–æ–º–∏–ª–∫–∞ "File too large"

- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä: 100 MB
- –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –º–µ–Ω—à–∏–π —Ñ–∞–π–ª –∞–±–æ –∑–º–µ–Ω—à–∏—Ç–∏ —è–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—É

### –ü–æ–º–∏–ª–∫–∞ "Processing timeout"

- –û–±—Ä–æ–±–∫–∞ –∑–∞–π–Ω—è–ª–∞ > 5 —Ö–≤–∏–ª–∏–Ω
- –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ –º–µ–Ω—à–∏–π —Ñ–∞–π–ª –∞–±–æ –∑–º–µ–Ω—à–∏—Ç–∏ `segment_duration`
- **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ó –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—é –æ–±—Ä–æ–±–∫–æ—é —Ç–∞–π–º–∞—É—Ç –Ω–µ –∑–∞—Å—Ç–æ—Å–æ–≤—É—î—Ç—å—Å—è - –æ–±—Ä–æ–±–∫–∞ –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –≤ —Ñ–æ–Ω—ñ, –∞–ª–µ –∑–∞–≤–¥–∞–Ω–Ω—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–¥–∞–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ 1 –≥–æ–¥–∏–Ω—É –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

### –ü–æ–≥–∞–Ω–∞ —è–∫—ñ—Å—Ç—å –¥—ñ–∞—Ä–∏–∑–∞—Ü—ñ—ó

- –Ø–≤–Ω–æ –≤–∫–∞–∑–∞—Ç–∏ `num_speakers` –∑–∞–º—ñ—Å—Ç—å –∞–≤—Ç–æ-–≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —è–∫—ñ—Å—Ç—å –∞—É–¥—ñ–æ (—á–∏—Å—Ç–æ—Ç–∞ –∑–≤—É–∫—É, –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å —à—É–º—É)
- –ó–±—ñ–ª—å—à–∏—Ç–∏ `segment_duration` –¥–æ 2-3 —Å–µ–∫—É–Ω–¥ (–ø–æ—Ç—Ä—ñ–±–Ω–æ –º–æ–¥–∏—Ñ—ñ–∫—É–≤–∞—Ç–∏ –∫–æ–¥)

---

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–∞ –ø–æ—Ä—Ç—É

–£ —Ñ–∞–π–ª—ñ `app_demo2.py` –∞–±–æ —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

```bash
DEMO2_PORT=8000 python app_demo2.py
```

### –ó–º—ñ–Ω–∞ –º–æ–¥–µ–ª—ñ Whisper

–£ —Ñ—É–Ω–∫—Ü—ñ—ó `load_models()` –≤ `app_demo2.py`:

```python
whisper_model = whisper.load_model("small")  # –∞–±–æ "medium", "large"
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ë—ñ–ª—å—à—ñ –º–æ–¥–µ–ª—ñ –¥–∞—é—Ç—å –∫—Ä–∞—â—É —è–∫—ñ—Å—Ç—å, –∞–ª–µ –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ.

---

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

1. –ó–∞–ø–∏—Å–∞—Ç–∏ –∞—É–¥—ñ–æ –Ω–∞ iPhone (30 —Å–µ–∫ - 10 —Ö–≤)
2. –í—ñ–¥–∫—Ä–∏—Ç–∏ Shortcuts app
3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ "AI Transcribe & Diarize"
4. –í–∏–±—Ä–∞—Ç–∏ –∑–∞–ø–∏—Å–∞–Ω–µ –∞—É–¥—ñ–æ
5. –í–∫–∞–∑–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—ñ–∫–µ—Ä—ñ–≤ (–∞–±–æ –∑–∞–ª–∏—à–∏—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º)
6. –û—Ç—Ä–∏–º–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—è–º –ø–æ —Å–ø—ñ–∫–µ—Ä–∞—Ö —Ç–∞ —Ç–µ–∫—Å—Ç–æ–º

---

**–ì–æ—Ç–æ–≤–æ!** üéâ

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º–∏, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Flask —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ MacBook.

